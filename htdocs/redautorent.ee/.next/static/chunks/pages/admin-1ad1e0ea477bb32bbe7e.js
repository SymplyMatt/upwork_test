(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{2596:function(e,n,a){"use strict";a.d(n,{W:function(){return u}});var s=a(4519),t=a(4002),i=a(3845),r=a(2997),c=a(7294),l=a(1852),o=a.n(l),d=a(5893);i.Z.use([r.Z]);var u=function(e){var n=e.images;n=JSON.parse(n);var a=(0,c.useState)(null),i=a[0],r=a[1],l=(0,c.useState)(0),u=l[0],m=l[1];return(0,d.jsxs)("div",{className:"car-slider",children:[(0,d.jsx)(s.t,{className:"slider",onSwiper:r,pagination:!0,slidesPerView:"auto",centeredSlides:!0,breakpoints:{576:{slidesPerView:1,pagination:!1}},onActiveIndexChange:function(){return m(i.activeIndex)},children:n.map((function(e){return(0,d.jsx)(t.o,{className:"car-slide",children:(0,d.jsx)("img",{src:e})},e)}))}),(0,d.jsx)(o(),{minWidth:576,children:(0,d.jsx)("div",{className:"car-slider__thumbs",children:i&&n.map((function(e,n){if(n!=u)return(0,d.jsx)("div",{onClick:function(){return i.slideTo(n)},className:"car-slider__thumb",children:(0,d.jsx)("img",{src:e})},e)}))})})]})}},963:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return w}});var s=a(266),t=a(6311),i=a(809),r=a.n(i),c=a(2596),l=a(1664),o=a(2809),d=a(8229),u=a.n(d),m=a(7294),p=a(1163),h=a(944),x=a(9376),j=a(7287),f=a(5893);function _(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,s)}return a}function v(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?_(Object(a),!0).forEach((function(n){(0,o.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}var g=function(e){var n=e.typeSubmit,a=e.close,s=e.car,t=(0,m.useContext)(h.x).state.lang,i=(0,m.useState)(!0),r=i[0],c=i[1],l=(0,p.useRouter)(),o=(0,m.useRef)(null),d=(0,m.useState)({id:s.id,model:s.model,Year:s.Year,Engine:s.Engine,Fuel:s.Fuel,Transmission:s.Transmission,Doors:s.Doors,Consumption:s.Consumption,Day:s.Day,Sixday:s.Sixday,Week:s.Week,Month:s.Month,Images:s.Images}),_=d[0],g=d[1];return(0,m.useEffect)((function(){var e=document.querySelector("body");return e.classList.add("overflow-hidden"),function(){return e.classList.remove("overflow-hidden")}}),[]),(0,f.jsx)("div",{id:"wrapper",onClick:function(e){return"wrapper"===e.target.id&&a()},className:u()["admin-popup-wrapper"],children:(0,f.jsxs)("div",{className:u()["admin-popup-content"],children:[(0,f.jsx)("h2",{children:"update"==n?"Edit car":"Create car"}),(0,f.jsx)("div",{onClick:a,className:"icon icon__close ".concat(u()["admin-popup-close-button"])}),(0,f.jsx)("span",{className:"red",children:"Max 5 photo"}),(0,f.jsx)("div",{className:u()["admin-image-picker"],children:(0,f.jsx)("div",{className:u()["admin-images-list"],children:JSON.parse(_.Images).length>0&&JSON.parse(_.Images).map((function(e,n){return(0,f.jsxs)("div",{className:"".concat(u()["admin-image-item"]),children:[(0,f.jsx)("div",{onClick:function(){return function(e){g((function(n){var a=n,s=JSON.parse(a.Images);return s=s.filter((function(n,a){return a!==e})),a.Images=JSON.stringify(s),console.log(_.Images),v({},a)}))}(n)},className:"icon icon__trash ".concat(u()["admin-image-delete"])}),(0,f.jsx)("img",{width:150,height:100,src:e})]},n+"imagetoupload")}))})}),(0,f.jsxs)("div",{className:u()["admin-popup__car-settings"],children:[(0,f.jsxs)("form",{onChange:function(e){var n=e.target;g((function(e){var a=e;return"Images"==n.name?(Array.from(n.files).forEach((function(e,n){if(e.type.match("image")&&!(n>8)){var a=new FileReader;a.onload=function(e){g((function(n){var a=n,s=JSON.parse(a.Images);return s.length>8||(s.push(e.target.result),a.Images=JSON.stringify(s)),v({},a)}))},a.readAsDataURL(e)}})),v({},a)):(a[n.name]=n.value,v({},a))}))},className:u()["admin-carsettings-form"],children:[(0,f.jsx)("input",{className:u()["admin-file-input"],ref:o,name:"Images",multiple:!0,accept:".jpg,.jpeg,.png",type:"file"}),(0,f.jsx)("button",{onClick:function(e){e.preventDefault(),o.current.click()},className:"button ".concat(u()["admin-input-file-button"]),children:"Open file"}),(0,f.jsx)("h4",{children:"et"==t?"S\xf5iduki omadused":"en"==t?"Vehicle characteristics":"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"}),(0,f.jsxs)("div",{className:u()["admin-carsettings-form__car-parameters"],children:[(0,f.jsxs)("label",{children:["et"==t?"Auto":"en"==t?"Vehicle":"\u0410\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c",(0,f.jsx)("input",{type:"text",name:"model",defaultValue:_.model})]}),(0,f.jsxs)("label",{children:["et"==t?"Aasta":"en"==t?"Year":"\u0413\u043e\u0434",(0,f.jsx)("input",{type:"number",name:"Year",defaultValue:_.Year})]}),(0,f.jsxs)("label",{children:["et"==t?"Mootor":"en"==t?"Engine":"\u0414\u0432\u0438\u0433\u0430\u0442\u0435\u043b\u044c",(0,f.jsx)("input",{type:"text",name:"Engine",defaultValue:_.Engine})]}),(0,f.jsxs)("label",{children:["et"==t?"K\xfctus":"en"==t?"Fuel type":"\u0422\u0438\u043f \u0442\u043e\u043f\u043b\u0438\u0432\u0430",(0,f.jsxs)("select",{name:"Fuel",defaultValue:_.Fuel,children:[(0,f.jsx)("option",{children:"100"}),(0,f.jsx)("option",{children:"98"}),(0,f.jsx)("option",{children:"95"}),(0,f.jsx)("option",{children:"92"}),(0,f.jsx)("option",{children:"Diesel"}),(0,f.jsx)("option",{children:"Gas"})]})]}),(0,f.jsxs)("label",{children:["et"==t?"K\xe4igukast":"en"==t?"Gearbox":"\u041a\u043e\u0440\u043e\u0431\u043a\u0430 \u043f\u0435\u0440\u0435\u0434\u0430\u0447",(0,f.jsxs)("select",{name:"Transmission",defaultValue:_.Transmission,children:[(0,f.jsx)("option",{children:"Manual"}),(0,f.jsx)("option",{children:"Auto"})]})]}),(0,f.jsxs)("label",{children:["et"==t?"Uste arv":"en"==t?"Doors":"\u041a\u043e\u043b-\u0432\u043e \u0434\u0432\u0435\u0440\u0435\u0439",(0,f.jsxs)("select",{name:"Doors",defaultValue:_.Doors,children:[(0,f.jsx)("option",{children:"5"}),(0,f.jsx)("option",{children:"3"})]})]}),(0,f.jsxs)("label",{children:["et"==t?"K\xfctusekulu":"en"==t?"Fuel Consumption":"\u0420\u0430\u0441\u0445\u043e\u0434 \u0442\u043e\u043f\u043b\u0438\u0432\u0430",(0,f.jsx)("input",{type:"string",name:"Consumption",defaultValue:_.Consumption})]})]}),(0,f.jsx)("h4",{children:"Hind"}),(0,f.jsxs)("div",{className:u()["admin-carsettings-form__price-parameters"],children:[(0,f.jsxs)("label",{children:["et"==t?"1 P\xe4ev \u20ac":"en"==t?"1 day \u20ac":"1 \u0434\u0435\u043d\u044c \u20ac",(0,f.jsx)("input",{type:"number",name:"Day",defaultValue:_.Day})]}),(0,f.jsxs)("label",{children:["et"==t?"1-6 P\xe4ev \u20ac":"en"==t?"1-6 day \u20ac":"1-6 \u0434\u043d\u0435\u0439 \u20ac",(0,f.jsx)("input",{type:"number",name:"Sixday",defaultValue:_.Sixday})]}),(0,f.jsxs)("label",{children:["et"==t?"1 N\xe4dal \u20ac":"en"==t?"1 Week \u20ac":"1 \u041d\u0435\u0434\u0435\u043b\u044f",(0,f.jsx)("input",{type:"number",name:"Week",defaultValue:_.Week})]}),(0,f.jsxs)("label",{children:["et"==t?"1 Kuu (".concat((_.Month/30).toFixed(2)," \u20ac /p\xe4ev)"):"en"==t?"1 Month (".concat((_.Month/30).toFixed(2)," \u20ac /day)"):"1 \u043c\u0435\u0441\u044f\u0446 (".concat((_.Month/30).toFixed(2)," \u20ac /\u0434\u0435\u043d\u044c)"),(0,f.jsx)("input",{type:"number",name:"Month",defaultValue:_.Month})]})]})]}),(0,f.jsx)("div",{children:r?(0,f.jsx)("button",{onClick:function(){return c(!1),void fetch("".concat(x._n,"api/car/").concat(n),{method:"PUT",body:JSON.stringify(_)}).then((function(){return l.reload(),a()}))},className:"button ".concat(u()["save-change-button"]),children:"et"==t?"Salvesta":"en"==t?"Save":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}):(0,f.jsx)(j.i,{})})]})]})})},b=function(e){var n=e.car,a=e.close,t=(0,p.useRouter)(),i=(0,m.useState)(!0),c=i[0],l=i[1];function o(){return(o=(0,s.Z)(r().mark((function e(){var a,s,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:n.id},e.next=3,fetch("".concat(x._n,"api/car/delete"),{method:"DELETE",body:JSON.stringify(a)});case 3:return s=e.sent,e.next=6,s.json();case 6:return t=e.sent,console.log(t),e.abrupt("return","ok");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,m.useEffect)((function(){var e=document.querySelector("body");return e.classList.add("overflow-hidden"),function(){return e.classList.remove("overflow-hidden")}}),[]),(0,f.jsx)("div",{id:"wrapper",onClick:function(e){return"wrapper"===e.target.id&&a()},className:"popup-wrapper",children:(0,f.jsxs)("div",{className:"popup-content",children:[(0,f.jsx)("div",{onClick:a,className:"icon icon__close popup-close"}),(0,f.jsx)("div",{className:"popup-content__message-title",children:"Delete"}),c?(0,f.jsxs)("div",{className:"popup-content__message-message",children:[(0,f.jsxs)("p",{children:["Delete ",(0,f.jsxs)("span",{className:"red",children:[n.model,"?"]})]}),(0,f.jsx)("button",{onClick:function(){l(!1),function(){return o.apply(this,arguments)}().then((function(e){return t.reload(),a()}))},className:"button",children:"Delete"})]}):(0,f.jsx)(j.i,{})]})})},N=function(e){var n=e.car,a=(0,m.useState)(!1),s=a[0],t=a[1],i=(0,m.useState)(!1),r=i[0],o=i[1];function d(){t(!s)}function p(){o(!r)}return s?document.querySelector("body").classList.add("overflow-hidden"):document.querySelector("body").classList.remove("overflow-hidden"),(0,f.jsxs)("div",{className:"car__card ".concat(u()["admin-car__card"]),children:[r&&(0,f.jsx)(b,{car:n,close:p}),s&&(0,f.jsx)(g,{typeSubmit:"update",car:n,close:d}),(0,f.jsx)(c.W,{images:n.Images}),(0,f.jsxs)("div",{className:"car__card-parameters",children:[(0,f.jsxs)("div",{className:u()["admin-settings"],children:[(0,f.jsx)("div",{onClick:d,className:"icon icon__gear"}),(0,f.jsx)("div",{onClick:p,className:"icon icon__trash"})]}),(0,f.jsxs)("ul",{className:"parameters car-parameters",children:[(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"Auto"}),(0,f.jsx)("span",{className:"red bold parametr-value",children:n.model})]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"Aasta"}),(0,f.jsx)("span",{className:"bold parametr-value",children:n.Year})]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"Mootor"}),(0,f.jsx)("span",{className:"bold parametr-value",children:n.Engine})]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"K\xfctus"}),(0,f.jsx)("span",{className:"bold parametr-value",children:n.Fuel})]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"K\xe4igukast"}),(0,f.jsx)("span",{className:"bold parametr-value",children:n.Transmission})]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"Uste arv"}),(0,f.jsx)("span",{className:"bold parametr-value",children:n.Doors})]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"K\xfctusekulu"}),(0,f.jsxs)("span",{className:"bold parametr-value",children:[n.Consumption,"Gas"!==n.Fuel?" l":" \u20ac","/100 km"]})]})]}),(0,f.jsxs)("ul",{className:"parameters rent-parameters",children:[(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"1 P\xe4ev"}),(0,f.jsxs)("span",{className:"bold parametr-value",children:[n.Day," \u20ac"]})]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"1-6 P\xe4eva"}),(0,f.jsxs)("span",{className:"bold parametr-value",children:[n.Sixday," \u20ac /p\xe4ev"]})]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"1 N\xe4dal"}),(0,f.jsxs)("span",{className:"bold parametr-value",children:[n.Week," \u20ac"]})]}),(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"parametr-name",children:"1 Kuu"}),(0,f.jsxs)("span",{className:"bold parametr-value",children:[n.Month," \u20ac (",(n.Month/30).toFixed(2)," \u20ac /p\xe4ev)"]})]}),(0,f.jsx)(l.default,{href:{pathname:"/autorent",query:{id:n.id}},children:(0,f.jsx)("button",{className:"button",children:"Broneeri"})})]})]})]})},y=a(795),k=a(8633);function w(){var e=(0,m.useState)(!1),n=e[0],a=e[1],i=(0,k.kP)(),c=(0,t.Z)(i,2),l=c[0],o=c[1],d=(0,m.useState)(!1),h=d[0],_=d[1],v=(0,p.useRouter)();function b(){_(!h)}if((0,m.useEffect)((0,s.Z)(r().mark((function e(){var n,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("is admin"),e.prev=1,e.next=4,fetch(x._n+"api/catalog");case 4:return n=e.sent,e.next=7,n.json();case 7:s=e.sent,a(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),[]),o)return(0,f.jsx)(j.B,{});l||v.push("/admin/login");var w={id:null,model:"model",Year:2005,Engine:"1.5",Fuel:"Bensiin 95",Transmission:"Auto",Doors:5,Consumption:6,Day:0,Sixday:0,Week:0,Month:0,Images:JSON.stringify([])};return(0,f.jsx)(y.Z,{admin:!0,title:"Administrator",children:l?(0,f.jsxs)(f.Fragment,{children:[h&&(0,f.jsx)(g,{typeSubmit:"create",car:w,close:b}),(0,f.jsx)("section",{className:"autod-breadcrumbs",children:(0,f.jsx)("div",{className:"breadcrumbs",children:(0,f.jsxs)("p",{children:[(0,f.jsx)("span",{className:"breadcrumb-parent",children:l.user.name}),(0,f.jsx)("button",{onClick:k.w7,className:"button__light ".concat(u()["admin-logout-button"]),children:"Log out"})]})})}),(0,f.jsxs)("section",{className:"autod-head ".concat(u()["admin-autod-head"]),children:[(0,f.jsx)("div",{className:"autod-admin-title",children:(0,f.jsx)("h2",{children:"Autod"})}),(0,f.jsxs)("div",{className:u()["admin-autod-subtitle"],children:[(0,f.jsx)("p",{children:"Hoolitseme oma klientide eest ja pakume laia valikut teenuseid"}),(0,f.jsx)("button",{onClick:b,className:"button__light",children:"Lisage s\xf5iduk"})]})]}),(0,f.jsx)("section",{className:"autod-cars",children:!1===n?(0,f.jsx)(j.B,{}):n.map((function(e){return(0,f.jsx)(N,{car:e},e.id.toString())}))})]}):(0,f.jsx)("p",{children:"Need authorization"})})}},9745:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return a(963)}])},8229:function(e){e.exports={"admin-autod-head":"admin_admin-autod-head__2h1xv","admin-autod-subtitle":"admin_admin-autod-subtitle__2rkTa","admin-car__card":"admin_admin-car__card__1WKGd","admin-settings":"admin_admin-settings__3rcnE","admin-popup-wrapper":"admin_admin-popup-wrapper__1nihB","admin-popup-content":"admin_admin-popup-content__2wzYJ","admin-image-picker":"admin_admin-image-picker__3NycA","admin-file-form":"admin_admin-file-form__1QcXR","admin-carsettings-form__car-parameters":"admin_admin-carsettings-form__car-parameters__7n3kO","admin-carsettings-form__price-parameters":"admin_admin-carsettings-form__price-parameters__2CEGs","save-change-button":"admin_save-change-button__2mOmT","admin-popup-close-button":"admin_admin-popup-close-button__2BLAX",auth:"admin_auth__3uQ49","admin-logout-button":"admin_admin-logout-button__3WQVp","admin-images-list":"admin_admin-images-list__g7rw1","admin-image-delete":"admin_admin-image-delete__2sCsX","admin-image-item":"admin_admin-image-item__n3AVF","admin-file-input":"admin_admin-file-input__1uyuZ","admin-input-file-button":"admin_admin-input-file-button__jUfim"}},266:function(e,n,a){"use strict";function s(e,n,a,s,t,i,r){try{var c=e[i](r),l=c.value}catch(o){return void a(o)}c.done?n(l):Promise.resolve(l).then(s,t)}function t(e){return function(){var n=this,a=arguments;return new Promise((function(t,i){var r=e.apply(n,a);function c(e){s(r,t,i,c,l,"next",e)}function l(e){s(r,t,i,c,l,"throw",e)}c(void 0)}))}}a.d(n,{Z:function(){return t}})}},function(e){e.O(0,[351,965,774,888,179],(function(){return n=9745,e(e.s=n);var n}));var n=e.O();_N_E=n}]);